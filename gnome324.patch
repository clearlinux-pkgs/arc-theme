From 4b75f33ff2cfedb6ba0809cf877deb2d2831e6c3 Mon Sep 17 00:00:00 2001
From: Horst3180 <horst3180@gmx.net>
Date: Fri, 12 May 2017 17:11:09 +0200
Subject: [PATCH] gnome-shell 3.24 fixes

---
 .../3.18/common-assets/misc/calendar-today.svg     | 205 +++++++++++++++++++++
 common/gnome-shell/3.18/gnome-shell-dark.css       |  69 +++++--
 common/gnome-shell/3.18/gnome-shell.css            |  69 +++++--
 common/gnome-shell/3.18/sass/_common.scss          |  58 ++++--
 4 files changed, 355 insertions(+), 46 deletions(-)
 create mode 100644 common/gnome-shell/3.18/common-assets/misc/calendar-today.svg

diff --git a/common/gnome-shell/3.18/common-assets/misc/calendar-today.svg b/common/gnome-shell/3.18/common-assets/misc/calendar-today.svg
new file mode 100644
index 0000000..b5a41f6
--- /dev/null
+++ b/common/gnome-shell/3.18/common-assets/misc/calendar-today.svg
@@ -0,0 +1,205 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no"?>
+<!-- Created with Inkscape (http://www.inkscape.org/) -->
+
+<svg
+   xmlns:osb="http://www.openswatchbook.org/uri/2009/osb"
+   xmlns:dc="http://purl.org/dc/elements/1.1/"
+   xmlns:cc="http://creativecommons.org/ns#"
+   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
+   xmlns:svg="http://www.w3.org/2000/svg"
+   xmlns="http://www.w3.org/2000/svg"
+   xmlns:xlink="http://www.w3.org/1999/xlink"
+   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
+   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
+   width="25"
+   height="25"
+   id="svg10621"
+   version="1.1"
+   inkscape:version="0.92.1 r"
+   sodipodi:docname="calendar-today.svg">
+  <defs
+     id="defs10623">
+    <linearGradient
+       id="selected_bg_color"
+       osb:paint="solid">
+      <stop
+         style="stop-color:#5294e2;stop-opacity:1;"
+         offset="0"
+         id="stop4503" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient4497"
+       xlink:href="#linearGradient34508-1-3">
+      <stop
+         style="stop-color:#5c616c;stop-opacity:1;"
+         offset="0"
+         id="stop4495" />
+    </linearGradient>
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient34508-1-3"
+       id="radialGradient99561-1"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(0.72146227,0,0,0.27484277,14.205424,21.754717)"
+       cx="51"
+       cy="30"
+       fx="51"
+       fy="30"
+       r="42" />
+    <linearGradient
+       inkscape:collect="always"
+       id="linearGradient34508-1-3">
+      <stop
+         style=""
+         offset="0"
+         id="stop34510-1-9" />
+      <stop
+         style=""
+         offset="1"
+         id="stop34512-4-5" />
+    </linearGradient>
+    <radialGradient
+       r="42"
+       fy="30"
+       fx="51"
+       cy="30"
+       cx="51"
+       gradientTransform="matrix(0.72146227,0,0,0.27484277,14.205424,21.754717)"
+       gradientUnits="userSpaceOnUse"
+       id="radialGradient10592"
+       xlink:href="#linearGradient34508-1-3"
+       inkscape:collect="always" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient34508-1-3"
+       id="radialGradient3770"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(0.72146227,0,0,0.27484277,14.205424,21.754717)"
+       cx="51"
+       cy="30"
+       fx="51"
+       fy="30"
+       r="42" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient34508-1-3"
+       id="radialGradient3001"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(0.72146227,0,0,0.27484277,14.205424,21.754717)"
+       cx="51"
+       cy="30"
+       fx="51"
+       fy="30"
+       r="42" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient34508-1-3"
+       id="radialGradient3007"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(0.72146227,0,0,0.27484277,14.205424,21.754717)"
+       cx="51"
+       cy="30"
+       fx="51"
+       fy="30"
+       r="42" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient34508-1-3"
+       id="radialGradient3067"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(0.72146227,0,0,0.27484277,14.205424,21.754717)"
+       cx="51"
+       cy="30"
+       fx="51"
+       fy="30"
+       r="42" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient34508-1-3"
+       id="radialGradient3072"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(0.72146227,0,0,0.27484277,14.205424,21.754717)"
+       cx="51"
+       cy="30"
+       fx="51"
+       fy="30"
+       r="42" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient34508-1-3"
+       id="radialGradient2997"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(0.72146227,0,0,0.27484277,14.205424,21.754717)"
+       cx="51"
+       cy="30"
+       fx="51"
+       fy="30"
+       r="42" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#selected_bg_color"
+       id="linearGradient4507"
+       x1="481.57138"
+       y1="557.9649"
+       x2="481.57138"
+       y2="560.9649"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="translate(0.01127006,-0.971853)" />
+  </defs>
+  <sodipodi:namedview
+     id="base"
+     pagecolor="#ffffff"
+     bordercolor="#666666"
+     borderopacity="1.0"
+     inkscape:pageopacity="0"
+     inkscape:pageshadow="2"
+     inkscape:zoom="8"
+     inkscape:cx="-4.7267653"
+     inkscape:cy="-0.085292111"
+     inkscape:document-units="px"
+     inkscape:current-layer="layer1"
+     showgrid="true"
+     fit-margin-top="0"
+     fit-margin-left="0"
+     fit-margin-right="0"
+     fit-margin-bottom="0"
+     inkscape:window-width="2133"
+     inkscape:window-height="1241"
+     inkscape:window-x="238"
+     inkscape:window-y="88"
+     inkscape:window-maximized="0"
+     borderlayer="true"
+     inkscape:showpageshadow="false">
+    <inkscape:grid
+       type="xygrid"
+       id="grid3109"
+       empspacing="5"
+       visible="true"
+       enabled="true"
+       snapvisiblegridlinesonly="true" />
+  </sodipodi:namedview>
+  <metadata
+     id="metadata10626">
+    <rdf:RDF>
+      <cc:Work
+         rdf:about="">
+        <dc:format>image/svg+xml</dc:format>
+        <dc:type
+           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
+        <dc:title></dc:title>
+      </cc:Work>
+    </rdf:RDF>
+  </metadata>
+  <g
+     inkscape:label="Layer 1"
+     inkscape:groupmode="layer"
+     id="layer1"
+     transform="translate(-469.08263,-536.99307)">
+    <circle
+       style="fill:url(#linearGradient4507);fill-opacity:1"
+       id="path7305"
+       cx="481.58264"
+       cy="558.49304"
+       r="1.5" />
+  </g>
+</svg>
diff --git a/common/gnome-shell/3.18/gnome-shell-dark.css b/common/gnome-shell/3.18/gnome-shell-dark.css
index db3555a..69438bb 100644
--- a/common/gnome-shell/3.18/gnome-shell-dark.css
+++ b/common/gnome-shell/3.18/gnome-shell-dark.css
@@ -797,17 +797,20 @@ StScrollBar {
 .datemenu-today-button,
 .datemenu-displays-box,
 .message-list-sections {
-  margin: 0 1.5em; }
+  margin: 0 0.4em; }
 
 .datemenu-calendar-column {
-  spacing: 0.5em; }
+  spacing: 0.5em;
+  border: none; }
 
 .datemenu-displays-section {
   padding-bottom: 3em; }
 
 .datemenu-today-button,
 .world-clocks-button,
-.message-list-section-title {
+.weather-button,
+.message-list-section-title,
+.events-section-title {
   border-radius: 3px;
   padding: .4em; }
 
@@ -819,14 +822,20 @@ StScrollBar {
 
 .datemenu-today-button,
 .world-clocks-button,
-.message-list-section-title {
+.weather-button,
+.message-list-section-title,
+.events-section-title {
   padding: 7px 10px 7px 10px;
   border: 1px solid rgba(64, 69, 82, 0); }
   .datemenu-today-button:hover, .datemenu-today-button:focus,
   .world-clocks-button:hover,
   .world-clocks-button:focus,
+  .weather-button:hover,
+  .weather-button:focus,
   .message-list-section-title:hover,
-  .message-list-section-title:focus {
+  .message-list-section-title:focus,
+  .events-section-title:hover,
+  .events-section-title:focus {
     text-shadow: 0 1px rgba(64, 69, 82, 0);
     color: #D3DAE3;
     background-color: #505666;
@@ -834,7 +843,9 @@ StScrollBar {
     box-shadow: inset 0 1px rgba(80, 86, 102, 0.05); }
   .datemenu-today-button:active,
   .world-clocks-button:active,
-  .message-list-section-title:active {
+  .weather-button:active,
+  .message-list-section-title:active,
+  .events-section-title:active {
     text-shadow: 0 1px rgba(64, 69, 82, 0);
     color: #ffffff;
     background-color: #5294e2;
@@ -845,16 +856,22 @@ StScrollBar {
   font-size: 1.5em; }
 
 .world-clocks-header,
-.message-list-section-title {
+.weather-header,
+.message-list-section-title,
+.events-section-title {
   color: rgba(211, 218, 227, 0.4);
   font-weight: bold; }
 
-.world-clocks-button:active .world-clocks-header {
+.world-clocks-button:active .world-clocks-header,
+.weather-button:active .weather-header {
   color: #ffffff; }
 
 .world-clocks-grid {
   spacing-rows: 0.4em; }
 
+.weather-box {
+  spacing: 0.4em; }
+
 .calendar-month-label {
   color: #D3DAE3;
   font-weight: bold;
@@ -929,6 +946,7 @@ StScrollBar {
 
 .calendar-today,
 .calendar-today:active,
+.calendar-today:selected,
 .calendar-today:focus,
 .calendar-today:hover {
   font-weight: bold;
@@ -937,8 +955,8 @@ StScrollBar {
   border-width: 0; }
 
 .calendar-day-with-events {
-  color: #5294e2;
-  font-weight: bold; }
+  font-weight: bold;
+  background-image: url("common-assets/misc/calendar-today.svg"); }
 
 .calendar-today.calendar-day-with-events {
   color: #ffffff; }
@@ -971,6 +989,9 @@ StScrollBar {
     height: 0; }
   .message-list-placeholder StLabel {
     color: rgba(211, 218, 227, 0.45); }
+  .message-list-clear-button.button {
+    margin: 1.5em 1.5em 0;
+    padding: 4px 12px; }
   .message-list-section-close > StIcon {
     icon-size: 18px;
     border-radius: 0px;
@@ -1001,34 +1022,48 @@ StScrollBar {
     .message-icon-bin:rtl {
       padding: 8px 8px 8px 0px; }
     .message-icon-bin > StIcon {
-      icon-size: 32px; }
-  .message-secondary-bin {
-    color: rgba(211, 218, 227, 0.4); }
-    .message-secondary-bin:ltr {
+      color: inherit; }
+  .message-secondary-bin,
+  .message-secondary-bin > .event-time {
+    color: rgba(211, 218, 227, 0.6);
+    font-size: 0.9em; }
+    .message-secondary-bin:ltr,
+    .message-secondary-bin > .event-time:ltr {
       padding-left: 8px; }
-    .message-secondary-bin:rtl {
+    .message-secondary-bin:rtl,
+    .message-secondary-bin > .event-time:rtl {
       padding-right: 8px; }
+  .message:active .message-secondary-bin,
+  .message:active .message-secondary-bin > .event-time {
+    color: rgba(255, 255, 255, 0.6); }
   .message-secondary-bin > StIcon {
     icon-size: 16px; }
   .message-title {
+    color: inherit;
     font-weight: bold;
     font-size: 1em;
     padding: 2px 0 2px 0; }
   .message-content {
+    color: inherit;
     padding: 8px;
     font-size: 1em; }
 
 .message-media-control {
   padding: 6px;
-  color: rgba(211, 218, 227, 0.45); }
+  color: #D3DAE3; }
   .message-media-control:last-child:ltr {
     padding-right: 18px; }
   .message-media-control:last-child:rtl {
     padding-left: 18px; }
   .message-media-control:hover {
-    color: #D3DAE3; }
+    color: rgba(211, 218, 227, 0.7); }
   .message-media-control:active {
     color: #5294e2; }
+  .message-media-control:insensitive {
+    color: rgba(211, 218, 227, 0.45); }
+
+.message:active .message-media-control {
+  color: #ffffff; }
 
 .media-message-cover-icon {
   icon-size: 32px; }
diff --git a/common/gnome-shell/3.18/gnome-shell.css b/common/gnome-shell/3.18/gnome-shell.css
index 45b2d1d..5d8c325 100644
--- a/common/gnome-shell/3.18/gnome-shell.css
+++ b/common/gnome-shell/3.18/gnome-shell.css
@@ -797,17 +797,20 @@ StScrollBar {
 .datemenu-today-button,
 .datemenu-displays-box,
 .message-list-sections {
-  margin: 0 1.5em; }
+  margin: 0 0.4em; }
 
 .datemenu-calendar-column {
-  spacing: 0.5em; }
+  spacing: 0.5em;
+  border: none; }
 
 .datemenu-displays-section {
   padding-bottom: 3em; }
 
 .datemenu-today-button,
 .world-clocks-button,
-.message-list-section-title {
+.weather-button,
+.message-list-section-title,
+.events-section-title {
   border-radius: 3px;
   padding: .4em; }
 
@@ -819,14 +822,20 @@ StScrollBar {
 
 .datemenu-today-button,
 .world-clocks-button,
-.message-list-section-title {
+.weather-button,
+.message-list-section-title,
+.events-section-title {
   padding: 7px 10px 7px 10px;
   border: 1px solid rgba(255, 255, 255, 0); }
   .datemenu-today-button:hover, .datemenu-today-button:focus,
   .world-clocks-button:hover,
   .world-clocks-button:focus,
+  .weather-button:hover,
+  .weather-button:focus,
   .message-list-section-title:hover,
-  .message-list-section-title:focus {
+  .message-list-section-title:focus,
+  .events-section-title:hover,
+  .events-section-title:focus {
     text-shadow: 0 1px rgba(255, 255, 255, 0);
     color: #5c616c;
     background-color: white;
@@ -834,7 +843,9 @@ StScrollBar {
     box-shadow: inset 0 1px rgba(255, 255, 255, 0.05); }
   .datemenu-today-button:active,
   .world-clocks-button:active,
-  .message-list-section-title:active {
+  .weather-button:active,
+  .message-list-section-title:active,
+  .events-section-title:active {
     text-shadow: 0 1px rgba(255, 255, 255, 0);
     color: #ffffff;
     background-color: #5294e2;
@@ -845,16 +856,22 @@ StScrollBar {
   font-size: 1.5em; }
 
 .world-clocks-header,
-.message-list-section-title {
+.weather-header,
+.message-list-section-title,
+.events-section-title {
   color: rgba(92, 97, 108, 0.4);
   font-weight: bold; }
 
-.world-clocks-button:active .world-clocks-header {
+.world-clocks-button:active .world-clocks-header,
+.weather-button:active .weather-header {
   color: #ffffff; }
 
 .world-clocks-grid {
   spacing-rows: 0.4em; }
 
+.weather-box {
+  spacing: 0.4em; }
+
 .calendar-month-label {
   color: #5c616c;
   font-weight: bold;
@@ -929,6 +946,7 @@ StScrollBar {
 
 .calendar-today,
 .calendar-today:active,
+.calendar-today:selected,
 .calendar-today:focus,
 .calendar-today:hover {
   font-weight: bold;
@@ -937,8 +955,8 @@ StScrollBar {
   border-width: 0; }
 
 .calendar-day-with-events {
-  color: #5294e2;
-  font-weight: bold; }
+  font-weight: bold;
+  background-image: url("common-assets/misc/calendar-today.svg"); }
 
 .calendar-today.calendar-day-with-events {
   color: #ffffff; }
@@ -971,6 +989,9 @@ StScrollBar {
     height: 0; }
   .message-list-placeholder StLabel {
     color: rgba(92, 97, 108, 0.55); }
+  .message-list-clear-button.button {
+    margin: 1.5em 1.5em 0;
+    padding: 4px 12px; }
   .message-list-section-close > StIcon {
     icon-size: 18px;
     border-radius: 0px;
@@ -1001,34 +1022,48 @@ StScrollBar {
     .message-icon-bin:rtl {
       padding: 8px 8px 8px 0px; }
     .message-icon-bin > StIcon {
-      icon-size: 32px; }
-  .message-secondary-bin {
-    color: rgba(92, 97, 108, 0.4); }
-    .message-secondary-bin:ltr {
+      color: inherit; }
+  .message-secondary-bin,
+  .message-secondary-bin > .event-time {
+    color: rgba(92, 97, 108, 0.6);
+    font-size: 0.9em; }
+    .message-secondary-bin:ltr,
+    .message-secondary-bin > .event-time:ltr {
       padding-left: 8px; }
-    .message-secondary-bin:rtl {
+    .message-secondary-bin:rtl,
+    .message-secondary-bin > .event-time:rtl {
       padding-right: 8px; }
+  .message:active .message-secondary-bin,
+  .message:active .message-secondary-bin > .event-time {
+    color: rgba(255, 255, 255, 0.6); }
   .message-secondary-bin > StIcon {
     icon-size: 16px; }
   .message-title {
+    color: inherit;
     font-weight: bold;
     font-size: 1em;
     padding: 2px 0 2px 0; }
   .message-content {
+    color: inherit;
     padding: 8px;
     font-size: 1em; }
 
 .message-media-control {
   padding: 6px;
-  color: rgba(92, 97, 108, 0.55); }
+  color: #5c616c; }
   .message-media-control:last-child:ltr {
     padding-right: 18px; }
   .message-media-control:last-child:rtl {
     padding-left: 18px; }
   .message-media-control:hover {
-    color: #5c616c; }
+    color: rgba(92, 97, 108, 0.7); }
   .message-media-control:active {
     color: #5294e2; }
+  .message-media-control:insensitive {
+    color: rgba(92, 97, 108, 0.55); }
+
+.message:active .message-media-control {
+  color: #ffffff; }
 
 .media-message-cover-icon {
   icon-size: 32px; }
diff --git a/common/gnome-shell/3.18/sass/_common.scss b/common/gnome-shell/3.18/sass/_common.scss
index 2bc78a4..297ea3d 100644
--- a/common/gnome-shell/3.18/sass/_common.scss
+++ b/common/gnome-shell/3.18/sass/_common.scss
@@ -1080,15 +1080,17 @@ StScrollBar {
 .datemenu-today-button,
 .datemenu-displays-box,
 .message-list-sections {
-  margin: 0 1.5em;
+  margin: 0 0.4em;
 }
 
-.datemenu-calendar-column { spacing: 0.5em; }
+.datemenu-calendar-column { spacing: 0.5em; border: none; }
 .datemenu-displays-section { padding-bottom: 3em; }
 
 .datemenu-today-button,
 .world-clocks-button,
-.message-list-section-title {
+.weather-button,
+.message-list-section-title,
+.events-section-title {
   border-radius: 3px;
   padding: .4em;
 }
@@ -1103,7 +1105,9 @@ StScrollBar {
 
 .datemenu-today-button,
 .world-clocks-button,
-.message-list-section-title {
+.weather-button,
+.message-list-section-title,
+.events-section-title {
   padding: 7px 10px 7px 10px;
   border: 1px solid transparentize($base_color, 1);
 
@@ -1119,12 +1123,15 @@ StScrollBar {
 }
 
 .world-clocks-header,
-.message-list-section-title {
+.weather-header,
+.message-list-section-title,
+.events-section-title {
   color: transparentize($fg_color, 0.6);
   font-weight: bold;
 }
 
-.world-clocks-button:active .world-clocks-header {
+.world-clocks-button:active .world-clocks-header,
+.weather-button:active .weather-header {
   color: $selected_fg_color;
 }
 
@@ -1132,6 +1139,10 @@ StScrollBar {
   spacing-rows: 0.4em;
 }
 
+.weather-box {
+  spacing: 0.4em;
+}
+
 .calendar-month-label {
   color: $fg_color;
   font-weight: bold;
@@ -1223,6 +1234,7 @@ StScrollBar {
 
 .calendar-today,
 .calendar-today:active,
+.calendar-today:selected,
 .calendar-today:focus,
 .calendar-today:hover {
   font-weight: bold;
@@ -1232,8 +1244,8 @@ StScrollBar {
 }
 
 .calendar-day-with-events {
-  color: $selected_bg_color;
   font-weight: bold;
+  background-image: url("common-assets/misc/calendar-today.svg");
 }
 
 .calendar-today.calendar-day-with-events { color: $selected_fg_color; }
@@ -1272,6 +1284,11 @@ StScrollBar {
     StLabel { color: $insensitive_fg_color; }
   }
 
+  &-clear-button.button {
+    margin: 1.5em 1.5em 0;
+    padding: 4px 12px;
+  }
+
   &-section-close {
 
     > StIcon {
@@ -1315,25 +1332,37 @@ StScrollBar {
 
     &:rtl { padding: 8px 8px 8px 0px; }
 
-    > StIcon { icon-size: 32px; }
+    > StIcon {
+      //icon-size: 32px;
+      color: inherit;
+    }
   }
 
-  &-secondary-bin {
-    color: transparentize($fg_color, 0.6);
+  &-secondary-bin,
+  &-secondary-bin > .event-time {
+    color: transparentize($fg_color, 0.4);
+    font-size: 0.9em;
 
     &:ltr { padding-left: 8px; }
     &:rtl { padding-right: 8px; }
   }
 
+  &:active .message-secondary-bin,
+  &:active .message-secondary-bin > .event-time {
+    color: transparentize($selected_fg_color, 0.4);
+  }
+
   &-secondary-bin > StIcon { icon-size: 16px; }
 
   &-title {
+    color: inherit;
     font-weight: bold;
     font-size: 1em;
     padding: 2px 0 2px 0;
   }
 
   &-content {
+    color: inherit;
     padding: 8px;
     font-size: 1em;
   }
@@ -1341,13 +1370,18 @@ StScrollBar {
 
 .message-media-control {
   padding: 6px;
-  color: $insensitive_fg_color;
+  color: $fg_color;
 
   &:last-child:ltr { padding-right: 18px; }
   &:last-child:rtl { padding-left: 18px; }
 
-  &:hover { color: $fg_color; }
+  &:hover { color: transparentize($fg_color, 0.3); }
   &:active { color: $selected_bg_color; }
+  &:insensitive { color: $insensitive_fg_color; }
+}
+
+.message:active .message-media-control {
+  color: $selected_fg_color;
 }
 
 .media-message-cover-icon {
